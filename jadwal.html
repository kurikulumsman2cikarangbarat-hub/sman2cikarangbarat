<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jadwal SMAN 2 Cikarang Barat</title>
    <style>
        * { box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        body { background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d); min-height: 100vh; margin: 0; padding: 20px; }
        .container { background: rgba(255, 255, 255, 0.95); border-radius: 20px; padding: 25px; max-width: 1600px; width: 100%; margin: 0 auto; box-shadow: 0 20px 60px rgba(0,0,0,0.5); }
        h1 { color: #1e3c72; text-align: center; margin-bottom: 20px; text-transform: uppercase; letter-spacing: 2px; border-bottom: 4px solid #1e3c72; padding-bottom: 10px; }
        .status-bar { background: #1e3c72; color: white; padding: 15px 30px; border-radius: 15px; margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center; }
        .current-time { font-size: 3em; font-weight: bold; font-family: 'Courier New', monospace; }
        .current-day { font-size: 1.8em; background: rgba(255,255,255,0.2); padding: 5px 25px; border-radius: 30px; }
        .log-section { background: #212529; color: #00ff00; padding: 12px; border-radius: 10px; font-family: 'Consolas', monospace; height: 80px; overflow-y: auto; margin-bottom: 20px; font-size: 0.85em; border-left: 5px solid #00ff00; }
        .main-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .panel { border-radius: 15px; overflow: hidden; border: 2px solid #dee2e6; background: white; }
        .panel-header { padding: 15px; text-align: center; font-size: 1.4em; font-weight: bold; color: white; }
        .now-header { background: #28a745; }
        .next-header { background: #fd7e14; }
        table { width: 100%; border-collapse: collapse; }
        th { background: #f8f9fa; color: #333; padding: 12px; border-bottom: 2px solid #dee2e6; font-size: 0.9em; }
        td { padding: 12px; text-align: center; border-bottom: 1px solid #eee; font-size: 1.1em; }
        .empty-state { padding: 40px; text-align: center; color: #999; font-style: italic; }
        .controls { margin-top: 20px; display: flex; gap: 10px; background: #eee; padding: 15px; border-radius: 10px; align-items: center; }
        button { padding: 10px 20px; border-radius: 5px; border: none; background: #1e3c72; color: white; cursor: pointer; font-weight: bold; }
        button:hover { background: #2a5298; }
        select { padding: 10px; border-radius: 5px; border: 1px solid #ccc; }
    </style>
</head>
<body>

<div class="container">
    <h1>üè´ JADWAL SMAN 2 CIKARANG BARAT</h1>
    <div class="status-bar">
        <div class="current-day" id="currentDay">---</div>
        <div class="current-time" id="currentTime">00:00:00</div>
    </div>
    <div class="log-section" id="logSection"><div>> Sistem monitor aktif...</div></div>
    <div class="main-grid">
        <div class="panel">
            <div class="panel-header now-header" id="labelNow">SEDANG BERLANGSUNG</div>
            <table id="tableNow">
                <thead><tr><th>Kelas</th><th>Guru</th><th>Mata Pelajaran</th></tr></thead>
                <tbody id="tbodyNow"></tbody>
            </table>
            <div id="emptyNow" class="empty-state" style="display:none;">Tidak ada kegiatan berlangsung</div>
        </div>
        <div class="panel">
            <div class="panel-header next-header" id="labelNext">KEGIATAN BERIKUTNYA</div>
            <table id="tableNext">
                <thead><tr><th>Kelas</th><th>Guru</th><th>Mata Pelajaran</th></tr></thead>
                <tbody id="tbodyNext"></tbody>
            </table>
            <div id="emptyNext" class="empty-state" style="display:none;">Tidak ada jadwal berikutnya</div>
        </div>
    </div>
    <div class="controls">
        <span style="font-weight:bold">Pengaturan Suara:</span>
        <select id="voiceSelect"></select>
        <button onclick="testSuara()">üîä Tes Suara</button>
        <button onclick="stopSuara()">‚èπ Berhenti</button>
    </div>
</div>

<script>
    let synthesis = window.speechSynthesis;
    let voices = [];
    let selectedVoice = null;
    let lastPlayedMinute = "";

    // ==================== DATA JADWAL GURU (KERANGKA LENGKAP) ====================
    const dataJadwalGuru = {
        "Senin": [
            { "jam": "06:30", "kegiatan": "Upacara", "detail": [{ "guru": "Seluruh Guru", "mapel": "Upacara Bendera", "kelas": "Lapangan" }] },
            { "jam": "07:20", "kegiatan": "KBM 1", "detail": [{ "guru": "Pak Donny", "mapel": "Sosiologi", "kelas": "X-A" }, { "guru": "Bu Yantri Wina", "mapel": "B. Indonesia", "kelas": "X-B" }] },
            { "jam": "09:00", "kegiatan": "Istirahat", "detail": [{ "guru": "-", "mapel": "Istirahat", "kelas": "-" }] },
            { "jam": "09:30", "kegiatan": "KBM 2", "detail": [{ "guru": "Pak Agus", "mapel": "Biologi", "kelas": "X-A" }, { "guru": "Bu Mimin", "mapel": "Matematika", "kelas": "X-B" }] },
            { "jam": "11:35", "kegiatan": "Pulang Pagi", "detail": [{ "guru": "-", "mapel": "Selesai", "kelas": "-" }] },
            { "jam": "12:30", "kegiatan": "KBM Siang", "detail": [{ "guru": "Guru D", "mapel": "Mapel D", "kelas": "XII-1" }] },
            { "jam": "17:05", "kegiatan": "Pulang Siang", "detail": [{ "guru": "-", "mapel": "Selesai", "kelas": "-" }] }
        ],
        "Selasa": [
            { "jam": "06:30", "kegiatan": "Literasi dan PBM 1", "detail": [{ "guru": "Wali Kelas", "mapel": "Literasi", "kelas": "Kelas" }] },
            { "jam": "07:20", "kegiatan": "PBM 2", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "07:45", "kegiatan": "PBM 3", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "08:10", "kegiatan": "PBM 4", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "08:35", "kegiatan": "PBM 5", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "09:00", "kegiatan": "Istirahat", "detail": [{ "guru": "Semua Guru", "mapel": "Selesai", "kelas": "Semua Kelas" }] },
            { "jam": "09:30", "kegiatan": "Selesai Istirahat", "detail": [{ "guru": "Semua Guru", "mapel": "Selesai", "kelas": "Semua Kelas" }] },
            { "jam": "09:30", "kegiatan": "PBM 6", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "09:55", "kegiatan": "PBM 7", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "10:20", "kegiatan": "PBM 8", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "10:55", "kegiatan": "PBM 9", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "11:10", "kegiatan": "PBM 10", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "11:35", "kegiatan": "Pulang", "detail": [{ "guru": "-", "mapel": "Pagi Selesai", "kelas": "Semua Kelas Pagi" }] },
            { "jam": "12:30", "kegiatan": "Literasi/ Numerasi & PBM 1", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "13:15", "kegiatan": "PBM 2", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "14:05", "kegiatan": "PBM 4", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "14:30", "kegiatan": "PBM 5", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "14:55", "kegiatan": "PBM 6", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "15:20", "kegiatan": "Istirahat", "detail": [{ "guru": "Semua Guru", "mapel": "Selesai", "kelas": "Semua Kelas" }] },
            { "jam": "15:50", "kegiatan": "Selesai Istirahat", "detail": [{ "guru": "Semua Guru", "mapel": "Selesai", "kelas": "Semua Kelas" }] },
            { "jam": "15:50", "kegiatan": "PBM 7", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "16:15", "kegiatan": "PBM 8", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "16:40", "kegiatan": "PBM 9", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "17:05", "kegiatan": "PBM 10", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "17:05", "kegiatan": "Pulang", "detail": [{ "guru": "Semua Guru", "mapel": "Selesai", "kelas": "Semua Kelas" }] }
        ],
        "Rabu": [
            { "jam": "06:30", "kegiatan": "Literasi dan PBM 1", "detail": [{ "guru": "Wali Kelas", "mapel": "Literasi", "kelas": "Kelas" }] },
            { "jam": "07:20", "kegiatan": "PBM 2", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "07:45", "kegiatan": "PBM 3", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "08:10", "kegiatan": "PBM 4", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "08:35", "kegiatan": "PBM 5", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "09:00", "kegiatan": "Istirahat", "detail": [{ "guru": "Semua Guru", "mapel": "Selesai", "kelas": "Semua Kelas" }] },
            { "jam": "09:30", "kegiatan": "Selesai Istirahat", "detail": [{ "guru": "Semua Guru", "mapel": "Selesai", "kelas": "Semua Kelas" }] },
            { "jam": "09:30", "kegiatan": "PBM 6", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "09:55", "kegiatan": "PBM 7", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "10:20", "kegiatan": "PBM 8", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "10:55", "kegiatan": "PBM 9", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "11:10", "kegiatan": "PBM 10", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "11:35", "kegiatan": "Pulang", "detail": [{ "guru": "-", "mapel": "Pagi Selesai", "kelas": "Semua Kelas Pagi" }] },
            { "jam": "12:30", "kegiatan": "Literasi/ Numerasi & PBM 1", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "13:15", "kegiatan": "PBM 2", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "14:05", "kegiatan": "PBM 4", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "14:30", "kegiatan": "PBM 5", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "14:55", "kegiatan": "PBM 6", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "15:20", "kegiatan": "Istirahat", "detail": [{ "guru": "Semua Guru", "mapel": "Selesai", "kelas": "Semua Kelas" }] },
            { "jam": "15:50", "kegiatan": "Selesai Istirahat", "detail": [{ "guru": "Semua Guru", "mapel": "Selesai", "kelas": "Semua Kelas" }] },
            { "jam": "15:50", "kegiatan": "PBM 7", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "16:15", "kegiatan": "PBM 8", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "16:40", "kegiatan": "PBM 9", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "17:05", "kegiatan": "PBM 10", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "17:05", "kegiatan": "Pulang", "detail": [{ "guru": "Semua Guru", "mapel": "Selesai", "kelas": "Semua Kelas" }] }
        ],
        "Kamis": [
            { "jam": "06:30", "kegiatan": "Literasi dan PBM 1", "detail": [{ "guru": "Wali Kelas", "mapel": "Literasi", "kelas": "Kelas" }] },
            { "jam": "07:20", "kegiatan": "PBM 2", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "07:45", "kegiatan": "PBM 3", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "08:10", "kegiatan": "PBM 4", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "08:35", "kegiatan": "PBM 5", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "09:00", "kegiatan": "Istirahat", "detail": [{ "guru": "Semua Guru", "mapel": "Selesai", "kelas": "Semua Kelas" }] },
            { "jam": "09:30", "kegiatan": "Selesai Istirahat", "detail": [{ "guru": "Semua Guru", "mapel": "Selesai", "kelas": "Semua Kelas" }] },
            { "jam": "09:30", "kegiatan": "PBM 6", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "09:55", "kegiatan": "PBM 7", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "10:20", "kegiatan": "PBM 8", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "10:55", "kegiatan": "PBM 9", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "11:10", "kegiatan": "PBM 10", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "11:35", "kegiatan": "Pulang", "detail": [{ "guru": "-", "mapel": "Pagi Selesai", "kelas": "Semua Kelas Pagi" }] },
            { "jam": "12:30", "kegiatan": "Literasi/ Numerasi & PBM 1", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "13:15", "kegiatan": "PBM 2", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "14:05", "kegiatan": "PBM 4", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "14:30", "kegiatan": "PBM 5", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "14:55", "kegiatan": "PBM 6", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "15:20", "kegiatan": "Istirahat", "detail": [{ "guru": "Semua Guru", "mapel": "Selesai", "kelas": "Semua Kelas" }] },
            { "jam": "15:50", "kegiatan": "Selesai Istirahat", "detail": [{ "guru": "Semua Guru", "mapel": "Selesai", "kelas": "Semua Kelas" }] },
            { "jam": "15:50", "kegiatan": "PBM 7", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "16:15", "kegiatan": "PBM 8", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "16:40", "kegiatan": "PBM 9", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "17:05", "kegiatan": "PBM 10", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "17:05", "kegiatan": "Pulang", "detail": [{ "guru": "Semua Guru", "mapel": "Selesai", "kelas": "Semua Kelas" }] }
        ],
        "Jumat": [
            { "jam": "06:30", "kegiatan": "Pancawaluya", "detail": [{ "guru": "Wali Kelas", "mapel": "Pacawaluya", "kelas": "Semua Kelas" }] },
            { "jam": "08:10", "kegiatan": "PBM 4", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "08:35", "kegiatan": "PBM 5", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "09:00", "kegiatan": "Istirahat", "detail": [{ "guru": "Semua Guru", "mapel": "Selesai", "kelas": "Semua Kelas" }] },
            { "jam": "09:30", "kegiatan": "Selesai Istirahat", "detail": [{ "guru": "Semua Guru", "mapel": "Selesai", "kelas": "Semua Kelas" }] },
            { "jam": "09:30", "kegiatan": "PBM 6", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "09:55", "kegiatan": "PBM 7", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "10:20", "kegiatan": "PBM 8", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "10:55", "kegiatan": "PBM 9", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "11:10", "kegiatan": "Pulang", "detail": [{ "guru": "-", "mapel": "Pagi Selesai", "kelas": "Semua Kelas Pagi" }] },
            { "jam": "13:15", "kegiatan": "PBM 1", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "14:05", "kegiatan": "PBM 2", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "14:30", "kegiatan": "PBM 3", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "14:55", "kegiatan": "PBM 4", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "15:20", "kegiatan": "Istirahat", "detail": [{ "guru": "Semua Guru", "mapel": "Selesai", "kelas": "Semua Kelas" }] },
            { "jam": "15:50", "kegiatan": "Selesai Istirahat", "detail": [{ "guru": "Semua Guru", "mapel": "Selesai", "kelas": "Semua Kelas" }] },
            { "jam": "15:50", "kegiatan": "PBM 5", "detail": Array.from({ length: 10 }, (_, i) => ({ "guru": `Guru ${i+1}`, "mapel": `Mapel ${i+1}`, "kelas": `XII-${String.fromCharCode(65 + i)}` })) },
            { "jam": "16:15", "kegiatan": "Upacara Bendera", "detail": [{ "guru": "Walikelas Guru", "mapel": "Selesai", "kelas": "Semua Kelas Siang" }] },
            { "jam": "17:05", "kegiatan": "Pulang", "detail": [{ "guru": "Semua Guru", "mapel": "Selesai", "kelas": "Semua Kelas" }] }
        ]
    };

    // ==================== DATA NOTIFIKASI VERSI FORMAL (LENGKAP) ====================
    const notifikasiTerjadwal = [
        { hari: 'Senin', jam: '06:30', pesan: 'Mohon perhatian, upacara pengibaran bendera merah putih akan segera dimulai. Seluruh siswa dan dewan guru dimohon menuju lapangan.' },
        { hari: 'Selasa', jam: '06:30', pesan: 'Mohon perhatian, saatnya kegiatan literasi dan numerasi dimulai. Seluruh siswa diharapkan berada di kelas masing-masing.' },
        { hari: 'Rabu', jam: '06:30', pesan: 'Mohon perhatian, saatnya kegiatan literasi dan numerasi dimulai. Seluruh siswa diharapkan berada di kelas masing-masing.' },
        { hari: 'Kamis', jam: '06:30', pesan: 'Mohon perhatian, saatnya kegiatan literasi dan numerasi dimulai. Seluruh siswa diharapkan berada di kelas masing-masing.' },
        { hari: 'Senin', jam: '12:30', pesan: 'Mohon perhatian, kegiatan literasi dan numerasi sesi siang dimulai. Harap segera memasuki ruang kelas.' },
        { hari: 'Selasa', jam: '12:30', pesan: 'Mohon perhatian, kegiatan literasi dan numerasi sesi siang dimulai. Harap segera memasuki ruang kelas.' },
        { hari: 'Rabu', jam: '12:30', pesan: 'Mohon perhatian, kegiatan literasi dan numerasi sesi siang dimulai. Harap segera memasuki ruang kelas.' },
        { hari: 'Kamis', jam: '12:30', pesan: 'Mohon perhatian, kegiatan literasi dan numerasi sesi siang dimulai. Harap segera memasuki ruang kelas.' },
        { hari: 'Jumat', jam: '06:30', pesan: 'Mohon perhatian, kegiatan Pancawaluya akan segera dilaksanakan. Seluruh civitas akademika dimohon menuju lapangan.' },
        { hari: 'Jumat', jam: '16:15', pesan: 'Mohon perhatian, upacara penurunan bendera akan segera dimulai. Seluruh peserta upacara dimohon menuju lapangan.' },
        { hari: 'Senin', jam: '07:20', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Senin', jam: '07:45', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Senin', jam: '08:10', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Senin', jam: '08:35', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Senin', jam: '09:56', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Senin', jam: '10:20', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Senin', jam: '10:45', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Senin', jam: '11:10', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Senin', jam: '13:40', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Senin', jam: '14:05', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Senin', jam: '14:30', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Senin', jam: '14:55', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Senin', jam: '16:15', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Senin', jam: '16:40', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Senin', jam: '17:05', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Selasa', jam: '07:20', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Selasa', jam: '07:45', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Selasa', jam: '08:10', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Selasa', jam: '08:35', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Selasa', jam: '09:56', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Selasa', jam: '10:20', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Selasa', jam: '10:45', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Selasa', jam: '11:10', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Selasa', jam: '13:40', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Selasa', jam: '14:05', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Selasa', jam: '14:30', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Selasa', jam: '14:55', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Selasa', jam: '16:15', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Selasa', jam: '16:40', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Selasa', jam: '17:05', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Rabu', jam: '07:20', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Rabu', jam: '07:45', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Rabu', jam: '08:10', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Rabu', jam: '08:35', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Rabu', jam: '09:56', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Rabu', jam: '10:20', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Rabu', jam: '10:45', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Rabu', jam: '11:10', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Rabu', jam: '13:40', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Rabu', jam: '14:05', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Rabu', jam: '14:30', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Rabu', jam: '14:55', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Rabu', jam: '16:15', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Rabu', jam: '16:40', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Rabu', jam: '17:05', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Kamis', jam: '07:20', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Kamis', jam: '07:45', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Kamis', jam: '08:10', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Kamis', jam: '08:35', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Kamis', jam: '09:56', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Kamis', jam: '10:20', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Kamis', jam: '10:45', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Kamis', jam: '11:10', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Kamis', jam: '13:40', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Kamis', jam: '14:05', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Kamis', jam: '14:30', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Kamis', jam: '14:55', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Kamis', jam: '16:15', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Kamis', jam: '16:40', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Jumat', jam: '11:10', pesan: 'Waktunya pergantian jam pelajaran. Mohon tetap tenang di dalam ruang kelas masing-masing.' },
        { hari: 'Senin', jam: '09:00', pesan: 'Mohon perhatian, saatnya jam istirahat dimulai.' },
        { hari: 'Senin', jam: '15:20', pesan: 'Mohon perhatian, saatnya jam istirahat dimulai.' },
        { hari: 'Selasa', jam: '09:00', pesan: 'Mohon perhatian, saatnya jam istirahat dimulai.' },
        { hari: 'Selasa', jam: '15:20', pesan: 'Mohon perhatian, saatnya jam istirahat dimulai.' },
        { hari: 'Rabu', jam: '09:00', pesan: 'Mohon perhatian, saatnya jam istirahat dimulai.' },
        { hari: 'Rabu', jam: '15:20', pesan: 'Mohon perhatian, saatnya jam istirahat dimulai.' },
        { hari: 'Kamis', jam: '09:00', pesan: 'Mohon perhatian, saatnya jam istirahat dimulai.' },
        { hari: 'Kamis', jam: '15:20', pesan: 'Mohon perhatian, saatnya jam istirahat dimulai.' },
        { hari: 'Jumat', jam: '09:00', pesan: 'Mohon perhatian, saatnya jam istirahat dimulai.' },
        { hari: 'Jumat', jam: '15:20', pesan: 'Mohon perhatian, saatnya jam istirahat dimulai.' },
        { hari: 'Senin', jam: '09:30', pesan: 'Mohon perhatian, waktu istirahat telah berakhir. Harap kembali ke ruang kelas.' },
        { hari: 'Senin', jam: '15:50', pesan: 'Mohon perhatian, waktu istirahat telah berakhir. Harap kembali ke ruang kelas.' },
        { hari: 'Selasa', jam: '09:30', pesan: 'Mohon perhatian, waktu istirahat telah berakhir. Harap kembali ke ruang kelas.' },
        { hari: 'Selasa', jam: '15:50', pesan: 'Mohon perhatian, waktu istirahat telah berakhir. Harap kembali ke ruang kelas.' },
        { hari: 'Rabu', jam: '09:30', pesan: 'Mohon perhatian, waktu istirahat telah berakhir. Harap kembali ke ruang kelas.' },
        { hari: 'Rabu', jam: '15:50', pesan: 'Mohon perhatian, waktu istirahat telah berakhir. Harap kembali ke ruang kelas.' },
        { hari: 'Kamis', jam: '09:30', pesan: 'Mohon perhatian, waktu istirahat telah berakhir. Harap kembali ke ruang kelas.' },
        { hari: 'Kamis', jam: '15:50', pesan: 'Mohon perhatian, waktu istirahat telah berakhir. Harap kembali ke ruang kelas.' },
        { hari: 'Jumat', jam: '09:30', pesan: 'Mohon perhatian, waktu istirahat telah berakhir. Harap kembali ke ruang kelas.' },
        { hari: 'Jumat', jam: '15:50', pesan: 'Mohon perhatian, waktu istirahat telah berakhir. Harap kembali ke ruang kelas.' },
        { hari: 'Senin', jam: '11:35', pesan: 'Mohon perhatian, kegiatan belajar mengajar untuk sesi pagi telah berakhir. Harap pulang dengan tertib.' },
        { hari: 'Selasa', jam: '11:35', pesan: 'Mohon perhatian, kegiatan belajar mengajar untuk sesi pagi telah berakhir. Harap pulang dengan tertib.' },
        { hari: 'Kamis', jam: '11:35', pesan: 'Mohon perhatian, kegiatan belajar mengajar untuk sesi pagi telah berakhir. Harap pulang dengan tertib.' },
        { hari: 'Jumat', jam: '11:10', pesan: 'Mohon perhatian, kegiatan belajar mengajar untuk sesi pagi telah berakhir. Harap pulang dengan tertib.' },
        { hari: 'Senin', jam: '17:05', pesan: 'Mohon perhatian, jam pelajaran hari ini telah berakhir. Terima kasih atas dedikasi Anda, selamat pulang ke rumah masing-masing.' },
        { hari: 'Selasa', jam: '17:05', pesan: 'Mohon perhatian, jam pelajaran hari ini telah berakhir. Terima kasih atas dedikasi Anda, selamat pulang ke rumah masing-masing.' },
        { hari: 'Kamis', jam: '17:05', pesan: 'Mohon perhatian, jam pelajaran hari ini telah berakhir. Terima kasih atas dedikasi Anda, selamat pulang ke rumah masing-masing.' },
        { hari: 'Jumat', jam: '17:05', pesan: 'Mohon perhatian, jam pelajaran hari ini telah berakhir. Terima kasih atas dedikasi Anda, selamat pulang ke rumah masing-masing.' }
    ];

    // ==================== LOGIKA UTAMA ====================
    function tambahLog(psn) {
        const log = document.getElementById('logSection');
        const t = new Date().toLocaleTimeString('id-ID');
        // Hanya tampilkan 10 baris log terakhir
        const lines = log.innerHTML.split('<div>');
        if (lines.length > 10) {
            log.innerHTML = lines.slice(lines.length - 10).join('<div>');
        }
        log.innerHTML += `<div>[${t}] > ${psn}</div>`;
        log.scrollTop = log.scrollHeight;
    }

    function updateWaktu() {
        const skr = new Date();
        const hariArr = ['Minggu', 'Senin', 'Selasa', 'Rabu', 'Kamis', 'Jumat', 'Sabtu'];
        document.getElementById('currentDay').innerText = hariArr[skr.getDay()];
        document.getElementById('currentTime').innerText = skr.toLocaleTimeString('id-ID', { hour12: false });
    }

    function renderTabelSplit() {
        const skr = new Date();
        const hariSkr = ['Minggu', 'Senin', 'Selasa', 'Rabu', 'Kamis', 'Jumat', 'Sabtu'][skr.getDay()];
        const menitSkr = (skr.getHours() * 60) + skr.getMinutes();
        const dataHariIni = dataJadwalGuru[hariSkr] || [];

        // Tentukan index jadwal yang sedang berlangsung
        let indexNow = -1;
        for (let i = 0; i < dataHariIni.length; i++) {
            const [h, m] = dataHariIni[i].jam.split(':').map(Number);
            if (menitSkr >= (h * 60 + m)) indexNow = i;
        }

        // Render panel "SEDANG BERLANGSUNG"
        const tbodyNow = document.getElementById('tbodyNow');
        const labelNow = document.getElementById('labelNow');
        tbodyNow.innerHTML = '';

        if (indexNow !== -1 && dataHariIni.length > 0) {
            const currentSlot = dataHariIni[indexNow];
            labelNow.innerText = `BERLANGSUNG (${currentSlot.jam} - ${currentSlot.kegiatan})`;
            currentSlot.detail.forEach(det => {
                tbodyNow.innerHTML += `<tr><td>${det.kelas}</td><td>${det.guru}</td><td>${det.mapel}</td></tr>`;
            });
            document.getElementById('emptyNow').style.display = 'none';
            document.getElementById('tableNow').style.display = 'table';
        } else {
            labelNow.innerText = "SEDANG BERLANGSUNG";
            document.getElementById('emptyNow').style.display = 'block';
            document.getElementById('tableNow').style.display = 'none';
            // Jika hari libur, tampilkan pesan
            if (['Minggu', 'Sabtu'].includes(hariSkr)) {
                document.getElementById('emptyNow').innerText = 'Hari Libur - Tidak ada kegiatan';
            } else {
                document.getElementById('emptyNow').innerText = 'Tidak ada kegiatan berlangsung';
            }
        }

        // Render panel "KEGIATAN BERIKUTNYA"
        const tbodyNext = document.getElementById('tbodyNext');
        const labelNext = document.getElementById('labelNext');
        tbodyNext.innerHTML = '';

        const nextSlot = dataHariIni[indexNow + 1];
        if (nextSlot) {
            labelNext.innerText = `BERIKUTNYA (Mulai ${nextSlot.jam})`;
            nextSlot.detail.forEach(det => {
                tbodyNext.innerHTML += `<tr><td>${det.kelas}</td><td>${det.guru}</td><td>${det.mapel}</td></tr>`;
            });
            document.getElementById('emptyNext').style.display = 'none';
            document.getElementById('tableNext').style.display = 'table';
        } else {
            labelNext.innerText = "KEGIATAN BERIKUTNYA";
            document.getElementById('emptyNext').style.display = 'block';
            document.getElementById('tableNext').style.display = 'none';
            if (['Minggu', 'Sabtu'].includes(hariSkr)) {
                document.getElementById('emptyNext').innerText = 'Hari Libur - Tidak ada kegiatan';
            } else {
                document.getElementById('emptyNext').innerText = 'Tidak ada jadwal berikutnya';
            }
        }
    }

    function cekNotifikasi() {
        const skr = new Date();
        const hariSkr = ['Minggu', 'Senin', 'Selasa', 'Rabu', 'Kamis', 'Jumat', 'Sabtu'][skr.getDay()];
        const jamSkr = skr.getHours().toString().padStart(2,'0') + ":" + skr.getMinutes().toString().padStart(2,'0');
        const menitSkr = jamSkr; // format HH:MM

        // Cegah notifikasi berulang dalam satu menit yang sama
        if (lastPlayedMinute === menitSkr) return;

        const match = notifikasiTerjadwal.find(n => n.hari === hariSkr && n.jam === jamSkr);
        if (match) {
            lastPlayedMinute = menitSkr;
            bicara(match.pesan);
        }
    }

    function bicara(teks) {
        synthesis.cancel();
        const utt = new SpeechSynthesisUtterance(teks);
        utt.voice = selectedVoice;
        utt.lang = 'id-ID';
        utt.rate = 0.9; // Sedikit lebih lambat agar jelas
        synthesis.speak(utt);
        tambahLog("üîä Pengumuman: " + teks.substring(0, 30) + "...");
    }

    function muatSuara() {
        voices = synthesis.getVoices();
        const select = document.getElementById('voiceSelect');
        select.innerHTML = '';

        // Filter suara bahasa Indonesia
        const indoVoices = voices.filter(v => v.lang.includes('id'));
        const voicesToShow = indoVoices.length > 0 ? indoVoices : voices;

        voicesToShow.forEach(v => {
            const opt = document.createElement('option');
            opt.value = v.name;
            opt.textContent = `${v.name} (${v.lang})`;
            select.appendChild(opt);
        });

        // Pilih suara Indonesia pertama jika ada
        selectedVoice = indoVoices.length > 0 ? indoVoices[0] : (voices[0] || null);
        if (selectedVoice) {
            select.value = selectedVoice.name;
        }
    }

    function testSuara() {
        bicara("Uji coba sistem monitor jadwal. Seluruh sistem berfungsi dengan baik.");
    }

    function stopSuara() {
        synthesis.cancel();
        tambahLog("‚èπ Pengumuman dihentikan.");
    }

    document.addEventListener('DOMContentLoaded', () => {
        muatSuara();
        if (synthesis.onvoiceschanged !== undefined) {
            synthesis.onvoiceschanged = muatSuara;
        }

        renderTabelSplit();
        setInterval(() => {
            updateWaktu();
            cekNotifikasi();
            renderTabelSplit();
        }, 1000);
    });
</script>
</body>
</html>
